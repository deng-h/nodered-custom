<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Three.js åŠ è½½æµ‹è¯•</title>
</head>
<body>
    <h1>Three.js åŠ è½½æµ‹è¯•</h1>
    <div id="status">æ­£åœ¨åŠ è½½...</div>
    <div id="test-container" style="width: 400px; height: 300px; border: 1px solid #ccc; margin: 20px 0;"></div>
    
    <script>
        console.log("å¼€å§‹æµ‹è¯• Three.js åŠ è½½");
        
        // CDN æºåˆ—è¡¨
        const cdnUrls = [
            'https://cdnjs.cloudflare.com/ajax/libs/three.js/r156/three.min.js',
            'https://unpkg.com/three@0.156.1/build/three.min.js',
            'https://cdn.jsdelivr.net/npm/three@0.156.1/build/three.min.js',
            './static/three.min.js'
        ];
        
        let currentIndex = 0;
        
        function updateStatus(message) {
            document.getElementById('status').innerHTML = message;
            console.log(message);
        }
        
        function tryLoadThreeJS() {
            if (currentIndex >= cdnUrls.length) {
                updateStatus("âŒ æ‰€æœ‰ Three.js æºéƒ½åŠ è½½å¤±è´¥");
                return;
            }
            
            updateStatus(`ğŸ”„ æ­£åœ¨å°è¯•åŠ è½½: ${cdnUrls[currentIndex]}`);
            
            const script = document.createElement('script');
            script.src = cdnUrls[currentIndex];
            
            script.onload = function() {
                if (window.THREE) {
                    updateStatus(`âœ… Three.js åŠ è½½æˆåŠŸ! ç‰ˆæœ¬: ${THREE.REVISION}`);
                    createTestScene();
                } else {
                    updateStatus("âŒ è„šæœ¬åŠ è½½äº†ä½† THREE å¯¹è±¡ä¸å¯ç”¨");
                    nextSource();
                }
            };
            
            script.onerror = function() {
                updateStatus(`âŒ åŠ è½½å¤±è´¥: ${cdnUrls[currentIndex]}`);
                nextSource();
            };
            
            document.head.appendChild(script);
        }
        
        function nextSource() {
            currentIndex++;
            setTimeout(tryLoadThreeJS, 1000);
        }
        
        function createTestScene() {
            const container = document.getElementById('test-container');
            
            // åˆ›å»ºåœºæ™¯
            const scene = new THREE.Scene();
            scene.background = new THREE.Color(0x222222);
            
            // åˆ›å»ºç›¸æœº
            const camera = new THREE.PerspectiveCamera(75, 400/300, 0.1, 1000);
            camera.position.z = 5;
            
            // åˆ›å»ºæ¸²æŸ“å™¨
            const renderer = new THREE.WebGLRenderer();
            renderer.setSize(400, 300);
            container.appendChild(renderer.domElement);
            
            // åˆ›å»ºä¸€ä¸ªæ—‹è½¬çš„ç«‹æ–¹ä½“
            const geometry = new THREE.BoxGeometry();
            const material = new THREE.MeshBasicMaterial({ color: 0x00ff00 });
            const cube = new THREE.Mesh(geometry, material);
            scene.add(cube);
            
            // åŠ¨ç”»å¾ªç¯
            function animate() {
                requestAnimationFrame(animate);
                cube.rotation.x += 0.01;
                cube.rotation.y += 0.01;
                renderer.render(scene, camera);
            }
            
            animate();
            updateStatus("âœ… Three.js æµ‹è¯•åœºæ™¯åˆ›å»ºæˆåŠŸ!");
        }
        
        // å¼€å§‹åŠ è½½æµ‹è¯•
        tryLoadThreeJS();
    </script>
</body>
</html>